{"ast":null,"code":"import _regeneratorRuntime from \"/home/maximuss/news/news/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/maximuss/news/news/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/maximuss/news/news/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/maximuss/news/news/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/maximuss/news/news/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/maximuss/news/news/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/maximuss/news/news/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/maximuss/news/news/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/maximuss/news/news/client/src/container/Register.js\";\nimport React, { Component } from 'react';\nimport RegisterForm from '../components/RegisterForm';\nimport { withRouter } from 'react-router-dom';\nimport { register } from '../utils/requests';\nimport { Authenticate } from '../utils/auth';\n\nvar Register =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Register, _Component);\n\n  function Register(props) {\n    var _this;\n\n    _classCallCheck(this, Register);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Register).call(this, props));\n    _this.onSubmit =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _this.setState({\n                isLoading: true\n              });\n\n            case 3:\n              _context.next = 5;\n              return register({\n                name: _this.state.name,\n                email: _this.state.email,\n                password: _this.state.password,\n                age: _this.state.age,\n                country: _this.state.country,\n                gender: _this.state.radio\n              });\n\n            case 5:\n              response = _context.sent;\n\n              if (response.success) {\n                Authenticate(response.token);\n\n                _this.props.history.push('/');\n              } else _this.setState({\n                error: response.message\n              });\n\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](0);\n\n              _this.setState({\n                error: _context.t0.message\n              });\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this, [[0, 9]]);\n    }));\n\n    _this.onRadioChange = function (number) {\n      _this.setState({\n        radio: number\n      });\n    };\n\n    _this.state = {\n      name: '',\n      email: '',\n      password: '',\n      confirmPassword: '',\n      age: null,\n      country: '',\n      radio: null,\n      isLoading: false,\n      error: ''\n    };\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onReset = _this.onReset.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onNameChange = _this.onNameChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onEmailChange = _this.onEmailChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onPasswordChange = _this.onPasswordChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onConfirmPasswordChange = _this.onConfirmPasswordChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onAgeChange = _this.onAgeChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onRadioChange = _this.onRadioChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onCountryChange = _this.onCountryChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Register, [{\n    key: \"onNameChange\",\n    value: function onNameChange(e) {\n      this.setState({\n        name: e.target.value\n      });\n    }\n  }, {\n    key: \"onEmailChange\",\n    value: function onEmailChange(e) {\n      this.setState({\n        email: e.target.value\n      });\n    }\n  }, {\n    key: \"onPasswordChange\",\n    value: function onPasswordChange(e) {\n      this.setState({\n        password: e.target.value\n      });\n    }\n  }, {\n    key: \"onConfirmPasswordChange\",\n    value: function onConfirmPasswordChange(e) {\n      if (!this.state.password) {\n        this.setState({\n          confirmPassword: e.target.value\n        });\n        return;\n      }\n\n      var err;\n      if (this.state.password !== e.target.value) err = 'Passwords do not match';else err = '';\n      this.setState({\n        confirmPassword: e.target.value,\n        error: err\n      });\n    }\n  }, {\n    key: \"onAgeChange\",\n    value: function onAgeChange(e) {\n      this.setState({\n        age: e.target.value\n      });\n    }\n  }, {\n    key: \"onCountryChange\",\n    value: function onCountryChange(e) {\n      this.setState({\n        country: e.target.value\n      });\n    }\n  }, {\n    key: \"onReset\",\n    value: function onReset() {\n      this.setState({\n        name: '',\n        email: '',\n        password: '',\n        confirmPassword: '',\n        age: null,\n        country: '',\n        radio: null,\n        error: '',\n        isLoading: false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(RegisterForm, {\n        onSubmit: this.onSubmit,\n        onNameChange: this.onNameChange,\n        onEmailChange: this.onEmailChange,\n        onPasswordChange: this.onPasswordChange,\n        onConfirmPasswordChange: this.onConfirmPasswordChange,\n        onAgeChange: this.onAgeChange,\n        onCountryChange: this.onCountryChange,\n        onRadioChecked: this.onRadioChange,\n        onReset: this.onReset,\n        isLoading: this.state.isLoading,\n        error: this.state.error,\n        name: this.state.name,\n        email: this.state.email,\n        password: this.state.password,\n        confirmPassword: this.state.confirmPassword,\n        age: this.state.age,\n        country: this.state.country,\n        radio: this.state.radio,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Register;\n}(Component);\n\nexport default withRouter(Register);","map":{"version":3,"sources":["/home/maximuss/news/news/client/src/container/Register.js"],"names":["React","Component","RegisterForm","withRouter","register","Authenticate","Register","props","onSubmit","setState","isLoading","name","state","email","password","age","country","gender","radio","response","success","token","history","push","error","message","onRadioChange","number","confirmPassword","bind","onReset","onNameChange","onEmailChange","onPasswordChange","onConfirmPasswordChange","onAgeChange","onCountryChange","e","target","value","err"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAcC,SAAd,QAA8B,OAA9B;AACA,OAAOC,YAAP,MAAyB,4BAAzB;AACA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,SAAQC,QAAR,QAAuB,mBAAvB;AACA,SAAQC,YAAR,QAA2B,eAA3B;;IAEMC,Q;;;;;AACJ,oBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,kFAAMA,KAAN;AADiB,UAwBnBC,QAxBmB;AAAA;AAAA;AAAA;AAAA,6BAwBR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEC,MAAKC,QAAL,CAAc;AAClBC,gBAAAA,SAAS,EAAG;AADM,eAAd,CAFD;;AAAA;AAAA;AAAA,qBAKkBN,QAAQ,CAAC;AAC9BO,gBAAAA,IAAI,EAAG,MAAKC,KAAL,CAAWD,IADY;AAE9BE,gBAAAA,KAAK,EAAG,MAAKD,KAAL,CAAWC,KAFW;AAG9BC,gBAAAA,QAAQ,EAAG,MAAKF,KAAL,CAAWE,QAHQ;AAI9BC,gBAAAA,GAAG,EAAG,MAAKH,KAAL,CAAWG,GAJa;AAK9BC,gBAAAA,OAAO,EAAG,MAAKJ,KAAL,CAAWI,OALS;AAM9BC,gBAAAA,MAAM,EAAG,MAAKL,KAAL,CAAWM;AANU,eAAD,CAL1B;;AAAA;AAKCC,cAAAA,QALD;;AAaL,kBAAGA,QAAQ,CAACC,OAAZ,EAAqB;AACnBf,gBAAAA,YAAY,CAACc,QAAQ,CAACE,KAAV,CAAZ;;AACA,sBAAKd,KAAL,CAAWe,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACD,eAHD,MAIK,MAAKd,QAAL,CAAc;AACfe,gBAAAA,KAAK,EAAGL,QAAQ,CAACM;AADF,eAAd;;AAjBA;AAAA;;AAAA;AAAA;AAAA;;AAsBL,oBAAKhB,QAAL,CAAc;AACZe,gBAAAA,KAAK,EAAG,YAAEC;AADE,eAAd;;AAtBK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAxBQ;;AAAA,UAkGnBC,aAlGmB,GAkGH,UAAAC,MAAM,EAAI;AACxB,YAAKlB,QAAL,CAAc;AACZS,QAAAA,KAAK,EAAGS;AADI,OAAd;AAGD,KAtGkB;;AAEjB,UAAKf,KAAL,GAAa;AACXD,MAAAA,IAAI,EAAG,EADI;AAEXE,MAAAA,KAAK,EAAG,EAFG;AAGXC,MAAAA,QAAQ,EAAG,EAHA;AAIXc,MAAAA,eAAe,EAAG,EAJP;AAKXb,MAAAA,GAAG,EAAG,IALK;AAMXC,MAAAA,OAAO,EAAG,EANC;AAOXE,MAAAA,KAAK,EAAG,IAPG;AAQXR,MAAAA,SAAS,EAAG,KARD;AASXc,MAAAA,KAAK,EAAG;AATG,KAAb;AAWA,UAAKhB,QAAL,GAAgB,MAAKA,QAAL,CAAcqB,IAAd,uDAAhB;AACA,UAAKC,OAAL,GAAe,MAAKA,OAAL,CAAaD,IAAb,uDAAf;AACA,UAAKE,YAAL,GAAoB,MAAKA,YAAL,CAAkBF,IAAlB,uDAApB;AACA,UAAKG,aAAL,GAAqB,MAAKA,aAAL,CAAmBH,IAAnB,uDAArB;AACA,UAAKI,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBJ,IAAtB,uDAAxB;AACA,UAAKK,uBAAL,GAA+B,MAAKA,uBAAL,CAA6BL,IAA7B,uDAA/B;AACA,UAAKM,WAAL,GAAmB,MAAKA,WAAL,CAAiBN,IAAjB,uDAAnB;AACA,UAAKH,aAAL,GAAqB,MAAKA,aAAL,CAAmBG,IAAnB,uDAArB;AACA,UAAKO,eAAL,GAAuB,MAAKA,eAAL,CAAqBP,IAArB,uDAAvB;AArBiB;AAsBlB;;;;iCA8BYQ,C,EAAG;AACd,WAAK5B,QAAL,CAAc;AACZE,QAAAA,IAAI,EAAG0B,CAAC,CAACC,MAAF,CAASC;AADJ,OAAd;AAGD;;;kCAEaF,C,EAAG;AACf,WAAK5B,QAAL,CAAc;AACZI,QAAAA,KAAK,EAAGwB,CAAC,CAACC,MAAF,CAASC;AADL,OAAd;AAGD;;;qCAEgBF,C,EAAG;AAClB,WAAK5B,QAAL,CAAc;AACZK,QAAAA,QAAQ,EAAGuB,CAAC,CAACC,MAAF,CAASC;AADR,OAAd;AAGD;;;4CAEuBF,C,EAAG;AACzB,UAAG,CAAC,KAAKzB,KAAL,CAAWE,QAAf,EAAyB;AACvB,aAAKL,QAAL,CAAc;AACZmB,UAAAA,eAAe,EAAGS,CAAC,CAACC,MAAF,CAASC;AADf,SAAd;AAGA;AACD;;AACD,UAAIC,GAAJ;AACA,UAAG,KAAK5B,KAAL,CAAWE,QAAX,KAAwBuB,CAAC,CAACC,MAAF,CAASC,KAApC,EAA2CC,GAAG,GAAG,wBAAN,CAA3C,KACKA,GAAG,GAAG,EAAN;AACL,WAAK/B,QAAL,CAAc;AACZmB,QAAAA,eAAe,EAAGS,CAAC,CAACC,MAAF,CAASC,KADf;AAEZf,QAAAA,KAAK,EAAGgB;AAFI,OAAd;AAID;;;gCAEWH,C,EAAG;AACb,WAAK5B,QAAL,CAAc;AACZM,QAAAA,GAAG,EAAGsB,CAAC,CAACC,MAAF,CAASC;AADH,OAAd;AAGD;;;oCAEeF,C,EAAG;AACjB,WAAK5B,QAAL,CAAc;AACZO,QAAAA,OAAO,EAAGqB,CAAC,CAACC,MAAF,CAASC;AADP,OAAd;AAGD;;;8BAQS;AACR,WAAK9B,QAAL,CAAc;AACZE,QAAAA,IAAI,EAAG,EADK;AAEZE,QAAAA,KAAK,EAAG,EAFI;AAGZC,QAAAA,QAAQ,EAAG,EAHC;AAIZc,QAAAA,eAAe,EAAG,EAJN;AAKZb,QAAAA,GAAG,EAAG,IALM;AAMZC,QAAAA,OAAO,EAAG,EANE;AAOZE,QAAAA,KAAK,EAAG,IAPI;AAQZM,QAAAA,KAAK,EAAG,EARI;AASZd,QAAAA,SAAS,EAAG;AATA,OAAd;AAWD;;;6BAEQ;AACP,aACE,oBAAC,YAAD;AAAc,QAAA,QAAQ,EAAE,KAAKF,QAA7B;AACc,QAAA,YAAY,EAAE,KAAKuB,YADjC;AAEc,QAAA,aAAa,EAAE,KAAKC,aAFlC;AAGc,QAAA,gBAAgB,EAAE,KAAKC,gBAHrC;AAIc,QAAA,uBAAuB,EAAE,KAAKC,uBAJ5C;AAKc,QAAA,WAAW,EAAE,KAAKC,WALhC;AAMc,QAAA,eAAe,EAAE,KAAKC,eANpC;AAOc,QAAA,cAAc,EAAE,KAAKV,aAPnC;AAQc,QAAA,OAAO,EAAE,KAAKI,OAR5B;AASc,QAAA,SAAS,EAAE,KAAKlB,KAAL,CAAWF,SATpC;AAUc,QAAA,KAAK,EAAE,KAAKE,KAAL,CAAWY,KAVhC;AAWc,QAAA,IAAI,EAAE,KAAKZ,KAAL,CAAWD,IAX/B;AAYc,QAAA,KAAK,EAAE,KAAKC,KAAL,CAAWC,KAZhC;AAac,QAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWE,QAbnC;AAcc,QAAA,eAAe,EAAE,KAAKF,KAAL,CAAWgB,eAd1C;AAec,QAAA,GAAG,EAAE,KAAKhB,KAAL,CAAWG,GAf9B;AAgBc,QAAA,OAAO,EAAE,KAAKH,KAAL,CAAWI,OAhBlC;AAiBc,QAAA,KAAK,EAAE,KAAKJ,KAAL,CAAWM,KAjBhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AAoBD;;;;EA5IoBjB,S;;AA+IvB,eAAeE,UAAU,CAACG,QAAD,CAAzB","sourcesContent":["import React,{Component} from 'react'\nimport RegisterForm from '../components/RegisterForm'\nimport {withRouter} from 'react-router-dom'\nimport {register} from '../utils/requests'\nimport {Authenticate} from '../utils/auth'\n\nclass Register extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      name : '',\n      email : '',\n      password : '',\n      confirmPassword : '',\n      age : null,\n      country : '',\n      radio : null,\n      isLoading : false,\n      error : ''\n    }\n    this.onSubmit = this.onSubmit.bind(this)\n    this.onReset = this.onReset.bind(this)\n    this.onNameChange = this.onNameChange.bind(this)\n    this.onEmailChange = this.onEmailChange.bind(this)\n    this.onPasswordChange = this.onPasswordChange.bind(this)\n    this.onConfirmPasswordChange = this.onConfirmPasswordChange.bind(this)\n    this.onAgeChange = this.onAgeChange.bind(this)\n    this.onRadioChange = this.onRadioChange.bind(this)\n    this.onCountryChange = this.onCountryChange.bind(this)\n  }\n\n  onSubmit = async () => {\n      try {\n        await this.setState({\n          isLoading : true\n        })\n        const response = await register({\n          name : this.state.name,\n          email : this.state.email,\n          password : this.state.password,\n          age : this.state.age,\n          country : this.state.country,\n          gender : this.state.radio\n        })\n        if(response.success) {\n          Authenticate(response.token)\n          this.props.history.push('/')\n        }\n        else this.setState({\n            error : response.message\n          })\n        }\n      catch (e) {\n        this.setState({\n          error : e.message\n        })\n      }\n  }\n\n  onNameChange(e) {\n    this.setState({\n      name : e.target.value\n    })\n  }\n\n  onEmailChange(e) {\n    this.setState({\n      email : e.target.value\n    })\n  }\n\n  onPasswordChange(e) {\n    this.setState({\n      password : e.target.value\n    })\n  }\n\n  onConfirmPasswordChange(e) {\n    if(!this.state.password) {\n      this.setState({\n        confirmPassword : e.target.value\n      })\n      return\n    }\n    let err\n    if(this.state.password !== e.target.value) err = 'Passwords do not match'\n    else err = ''\n    this.setState({\n      confirmPassword : e.target.value,\n      error : err\n    })\n  }\n\n  onAgeChange(e) {\n    this.setState({\n      age : e.target.value\n    })\n  }\n\n  onCountryChange(e) {\n    this.setState({\n      country : e.target.value\n    })\n  }\n\n  onRadioChange = number => {\n    this.setState({\n      radio : number\n    })\n  }\n\n  onReset() {\n    this.setState({\n      name : '',\n      email : '',\n      password : '',\n      confirmPassword : '',\n      age : null,\n      country : '',\n      radio : null,\n      error : '',\n      isLoading : false\n    })\n  }\n\n  render() {\n    return (\n      <RegisterForm onSubmit={this.onSubmit}\n                    onNameChange={this.onNameChange}\n                    onEmailChange={this.onEmailChange}\n                    onPasswordChange={this.onPasswordChange}\n                    onConfirmPasswordChange={this.onConfirmPasswordChange}\n                    onAgeChange={this.onAgeChange}\n                    onCountryChange={this.onCountryChange}\n                    onRadioChecked={this.onRadioChange}\n                    onReset={this.onReset}\n                    isLoading={this.state.isLoading}\n                    error={this.state.error}\n                    name={this.state.name}\n                    email={this.state.email}\n                    password={this.state.password}\n                    confirmPassword={this.state.confirmPassword}\n                    age={this.state.age}\n                    country={this.state.country}\n                    radio={this.state.radio}/>\n    )\n  }\n}\n\nexport default withRouter(Register)"]},"metadata":{},"sourceType":"module"}